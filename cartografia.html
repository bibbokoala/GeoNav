<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="css/jquery.mobile.min.css" />
  <link rel="stylesheet" href="css/themes/BlackRedYellow.min.css" />
  <link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
  <link rel="apple-touch-icon" href="pics/icon.png">
<script src="phonegap.js"></script>
<script src="js/jquery-2.1.4.min.js" type="text/javascript"></script>
<script src="js/jquery.mobile.min.js"></script>
<style>
  #map-page, #map-canvas { width: 100%; height: 100%; padding: 0; }
</style>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
    <script>
// Note: This example requires that you consent to location sharing when
// prompted by your browser. If you see the error "The Geolocation service
// failed.", it means you probably did not give permission for the browser to
// locate you.

function initMap() {
  // Try HTML5 geolocation.
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var pos = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };
      console.log(pos);
  var map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: pos,
    zoom: 6
  });
  var infoWindow = new google.maps.InfoWindow({map: map});
      infoWindow.setPosition(pos);
      infoWindow.setContent('<font color=black>TI TROVI QUI.</font>');
      map.setCenter(pos);
      //DEBUG console.log(infoWindow);
    }, function() {
      handleLocationError(true, infoWindow, map.getCenter());
    });
  } else {
    // Browser doesn't support Geolocation
    handleLocationError(false, infoWindow, map.getCenter());
  }
}

function handleLocationError(browserHasGeolocation, infoWindow, pos) {
  infoWindow.setPosition(pos);
  infoWindow.setContent(browserHasGeolocation ?
                        'Error: The Geolocation service failed.' :
                        'Error: Your browser doesn\'t support geolocation.');
}

    </script>


</head>
<body onload='initMap()' >
<!-- Home -->
<div data-url="map-page" data-role="page" id="map-page">
    <div data-role="header" data-theme="a">
	   <a href="index.html" data-icon="home">Home</a>
	   <h1>GEO NAV</h1>
    </div>
    <div role="main" class="ui-content" id="map-canvas">
        <!-- map loads here... -->
        <div id="map-canvas"></div>
    </div>
</div>
</div>
</body>
</html>